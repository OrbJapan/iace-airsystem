var Dr=Object.defineProperty;var Ot=e=>{throw TypeError(e)};var Fr=(e,t,r)=>t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var v=(e,t,r)=>Fr(e,typeof t!="symbol"?t+"":t,r),at=(e,t,r)=>t.has(e)||Ot("Cannot "+r);var h=(e,t,r)=>(at(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?Ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),y=(e,t,r,n)=>(at(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),S=(e,t,r)=>(at(e,t,"access private method"),r);var jt=(e,t,r,n)=>({set _(i){y(e,t,i,r)},get _(){return h(e,t,n)}});var er={Stringify:1},M=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},Hr=/[&<>'"]/,tr=async(e,t)=>{let r="";t||(t=[]);const n=await Promise.all(e);for(let i=n.length-1;r+=n[i],i--,!(i<0);i--){let l=n[i];typeof l=="object"&&t.push(...l.callbacks||[]);const a=l.isEscaped;if(l=await(typeof l=="object"?l.toString():l),typeof l=="object"&&t.push(...l.callbacks||[]),l.isEscaped??a)r+=l;else{const c=[r];ee(l,c),r=c[0]}}return M(r,t)},ee=(e,t)=>{const r=e.search(Hr);if(r===-1){t[0]+=e;return}let n,i,l=0;for(i=r;i<e.length;i++){switch(e.charCodeAt(i)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}t[0]+=e.substring(l,i)+n,l=i+1}t[0]+=e.substring(l,i)},rr=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const r=[e],n={};return t.forEach(i=>i({phase:er.Stringify,buffer:r,context:n})),r[0]},sr=async(e,t,r,n,i)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const l=e.callbacks;return l!=null&&l.length?(i?i[0]+=e:i=[e],Promise.all(l.map(c=>c({phase:t,buffer:i,context:n}))).then(c=>Promise.all(c.filter(Boolean).map(o=>sr(o,t,!1,n,i))).then(()=>i[0]))):Promise.resolve(e)},Ir=(e,...t)=>{const r=[""];for(let n=0,i=e.length-1;n<i;n++){r[0]+=e[n];const l=Array.isArray(t[n])?t[n].flat(1/0):[t[n]];for(let a=0,c=l.length;a<c;a++){const o=l[a];if(typeof o=="string")ee(o,r);else if(typeof o=="number")r[0]+=o;else{if(typeof o=="boolean"||o===null||o===void 0)continue;if(typeof o=="object"&&o.isEscaped)if(o.callbacks)r.unshift("",o);else{const d=o.toString();d instanceof Promise?r.unshift("",d):r[0]+=d}else o instanceof Promise?r.unshift("",o):ee(o.toString(),r)}}}return r[0]+=e.at(-1),r.length===1?"callbacks"in r?M(rr(M(r[0],r.callbacks))):M(r[0]):tr(r,r.callbacks)},Et=Symbol("RENDERER"),vt=Symbol("ERROR_HANDLER"),A=Symbol("STASH"),nr=Symbol("INTERNAL"),_r=Symbol("MEMO"),et=Symbol("PERMALINK"),Tt=e=>(e[nr]=!0,e),ir=e=>({value:t,children:r})=>{if(!r)return;const n={children:[{tag:Tt(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?n.children.push(...r.flat()):n.children.push(r),n.children.push({tag:Tt(()=>{e.pop()}),props:{}});const i={tag:"",props:n,type:""};return i[vt]=l=>{throw e.pop(),l},i},lr=e=>{const t=[e],r=ir(t);return r.values=t,r.Provider=r,we.push(r),r},we=[],kt=e=>{const t=[e],r=(n=>{t.push(n.value);let i;try{i=n.children?(Array.isArray(n.children)?new dr("",{},n.children):n.children).toString():""}catch(l){throw t.pop(),l}return i instanceof Promise?i.finally(()=>t.pop()).then(l=>M(l,l.callbacks)):(t.pop(),M(i))});return r.values=t,r.Provider=r,r[Et]=ir(t),we.push(r),r},ke=e=>e.values.at(-1),ze={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},mt={},Ve="data-precedence",Ie=e=>Array.isArray(e)?e:[e],$t=new WeakMap,Lt=(e,t,r,n)=>({buffer:i,context:l})=>{if(!i)return;const a=$t.get(l)||{};$t.set(l,a);const c=a[e]||(a[e]=[]);let o=!1;const d=ze[e];if(d.length>0){e:for(const[,u]of c)for(const f of d)if(((u==null?void 0:u[f])??null)===(r==null?void 0:r[f])){o=!0;break e}}if(o?i[0]=i[0].replaceAll(t,""):d.length>0?c.push([t,r,n]):c.unshift([t,r,n]),i[0].indexOf("</head>")!==-1){let u;if(n===void 0)u=c.map(([f])=>f);else{const f=[];u=c.map(([g,,p])=>{let m=f.indexOf(p);return m===-1&&(f.push(p),m=f.length-1),[g,m]}).sort((g,p)=>g[1]-p[1]).map(([g])=>g)}u.forEach(f=>{i[0]=i[0].replaceAll(f,"")}),i[0]=i[0].replace(/(?=<\/head>)/,u.join(""))}},_e=(e,t,r)=>M(new I(e,r,Ie(t??[])).toString()),Be=(e,t,r,n)=>{if("itemProp"in r)return _e(e,t,r);let{precedence:i,blocking:l,...a}=r;i=n?i??"":void 0,n&&(a[Ve]=i);const c=new I(e,a,Ie(t||[])).toString();return c instanceof Promise?c.then(o=>M(c,[...o.callbacks||[],Lt(e,o,a,i)])):M(c,[Lt(e,c,a,i)])},Br=({children:e,...t})=>{const r=St();if(r){const n=ke(r);if(n==="svg"||n==="head")return new I("title",t,Ie(e??[]))}return Be("title",e,t,!1)},qr=({children:e,...t})=>{const r=St();return["src","async"].some(n=>!t[n])||r&&ke(r)==="head"?_e("script",e,t):Be("script",e,t,!1)},Ur=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,Be("style",e,t,!0)):_e("style",e,t),Wr=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?_e("link",e,t):Be("link",e,t,"precedence"in t),Kr=({children:e,...t})=>{const r=St();return r&&ke(r)==="head"?_e("meta",e,t):Be("meta",e,t,!1)},ar=(e,{children:t,...r})=>new I(e,r,Ie(t??[])),zr=e=>(typeof e.action=="function"&&(e.action=et in e.action?e.action[et]:void 0),ar("form",e)),cr=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=et in t.formAction?t.formAction[et]:void 0),ar(e,t)),Vr=e=>cr("input",e),Gr=e=>cr("button",e);const ct=Object.freeze(Object.defineProperty({__proto__:null,button:Gr,form:zr,input:Vr,link:Wr,meta:Kr,script:qr,style:Ur,title:Br},Symbol.toStringTag,{value:"Module"}));var Jr=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),tt=e=>Jr.get(e)||e,or=(e,t)=>{for(const[r,n]of Object.entries(e)){const i=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`);t(i,n==null?null:typeof n=="number"?i.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}`:`${n}px`:n)}},je=void 0,St=()=>je,Xr=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,Zr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Yr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Rt=(e,t)=>{for(let r=0,n=e.length;r<n;r++){const i=e[r];if(typeof i=="string")ee(i,t);else{if(typeof i=="boolean"||i===null||i===void 0)continue;i instanceof I?i.toStringToBuffer(t):typeof i=="number"||i.isEscaped?t[0]+=i:i instanceof Promise?t.unshift("",i):Rt(i,t)}}},I=class{constructor(e,t,r){v(this,"tag");v(this,"props");v(this,"key");v(this,"children");v(this,"isEscaped",!0);v(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,r;const e=[""];(t=this.localContexts)==null||t.forEach(([n,i])=>{n.values.push(i)});try{this.toStringToBuffer(e)}finally{(r=this.localContexts)==null||r.forEach(([n])=>{n.values.pop()})}return e.length===1?"callbacks"in e?rr(M(e[0],e.callbacks)).toString():e[0]:tr(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:n}=this;e[0]+=`<${t}`;const i=je&&ke(je)==="svg"?l=>Xr(tt(l)):l=>tt(l);for(let[l,a]of Object.entries(r))if(l=i(l),l!=="children"){if(l==="style"&&typeof a=="object"){let c="";or(a,(o,d)=>{d!=null&&(c+=`${c?";":""}${o}:${d}`)}),e[0]+=' style="',ee(c,e),e[0]+='"'}else if(typeof a=="string")e[0]+=` ${l}="`,ee(a,e),e[0]+='"';else if(a!=null)if(typeof a=="number"||a.isEscaped)e[0]+=` ${l}="${a}"`;else if(typeof a=="boolean"&&Yr.includes(l))a&&(e[0]+=` ${l}=""`);else if(l==="dangerouslySetInnerHTML"){if(n.length>0)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");n=[M(a.__html)]}else if(a instanceof Promise)e[0]+=` ${l}="`,e.unshift('"',a);else if(typeof a=="function"){if(!l.startsWith("on")&&l!=="ref")throw new Error(`Invalid prop '${l}' of type 'function' supplied to '${t}'.`)}else e[0]+=` ${l}="`,ee(a.toString(),e),e[0]+='"'}if(Zr.includes(t)&&n.length===0){e[0]+="/>";return}e[0]+=">",Rt(n,e),e[0]+=`</${t}>`}},ot=class extends I{toStringToBuffer(e){const{children:t}=this,r={...this.props};t.length&&(r.children=t.length===1?t[0]:t);const n=this.tag.call(null,r);if(!(typeof n=="boolean"||n==null))if(n instanceof Promise)if(we.length===0)e.unshift("",n);else{const i=we.map(l=>[l,l.values.at(-1)]);e.unshift("",n.then(l=>(l instanceof I&&(l.localContexts=i),l)))}else n instanceof I?n.toStringToBuffer(e):typeof n=="number"||n.isEscaped?(e[0]+=n,n.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...n.callbacks))):ee(n,e)}},dr=class extends I{toStringToBuffer(e){Rt(this.children,e)}},Nt=(e,t,...r)=>{t??(t={}),r.length&&(t.children=r.length===1?r[0]:r);const n=t.key;delete t.key;const i=Ge(e,t,r);return i.key=n,i},Mt=!1,Ge=(e,t,r)=>{if(!Mt){for(const n in mt)ct[n][Et]=mt[n];Mt=!0}return typeof e=="function"?new ot(e,t,r):ct[e]?new ot(ct[e],t,r):e==="svg"||e==="head"?(je||(je=kt("")),new I(e,t,[new ot(je,{value:e},r)])):new I(e,t,r)},Qr=({children:e})=>new dr("",{children:e},Array.isArray(e)?e:e?[e]:[]);function s(e,t,r){let n;if(!t||!("children"in t))n=Ge(e,t,[]);else{const i=t.children;n=Array.isArray(i)?Ge(e,t,i):Ge(e,t,[i])}return n.key=r,n}var Dt=(e,t,r)=>(n,i)=>{let l=-1;return a(0);async function a(c){if(c<=l)throw new Error("next() called multiple times");l=c;let o,d=!1,u;if(e[c]?(u=e[c][0][0],n.req.routeIndex=c):u=c===e.length&&i||void 0,u)try{o=await u(n,()=>a(c+1))}catch(f){if(f instanceof Error&&t)n.error=f,o=await t(f,n),d=!0;else throw f}else n.finalized===!1&&r&&(o=await r(n));return o&&(n.finalized===!1||d)&&(n.res=o),n}},es=Symbol(),ts=async(e,t=Object.create(null))=>{const{all:r=!1,dot:n=!1}=t,l=(e instanceof xr?e.raw.headers:e.headers).get("Content-Type");return l!=null&&l.startsWith("multipart/form-data")||l!=null&&l.startsWith("application/x-www-form-urlencoded")?rs(e,{all:r,dot:n}):{}};async function rs(e,t){const r=await e.formData();return r?ss(r,t):{}}function ss(e,t){const r=Object.create(null);return e.forEach((n,i)=>{t.all||i.endsWith("[]")?ns(r,i,n):r[i]=n}),t.dot&&Object.entries(r).forEach(([n,i])=>{n.includes(".")&&(is(r,n,i),delete r[n])}),r}var ns=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},is=(e,t,r)=>{let n=e;const i=t.split(".");i.forEach((l,a)=>{a===i.length-1?n[l]=r:((!n[l]||typeof n[l]!="object"||Array.isArray(n[l])||n[l]instanceof File)&&(n[l]=Object.create(null)),n=n[l])})},hr=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},ls=e=>{const{groups:t,path:r}=as(e),n=hr(r);return cs(n,t)},as=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{const i=`@${n}`;return t.push([i,r]),i}),{groups:t,path:e}},cs=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[n]=t[r];for(let i=e.length-1;i>=0;i--)if(e[i].includes(n)){e[i]=e[i].replace(n,t[r][1]);break}}return e},We={},os=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const n=`${e}#${t}`;return We[n]||(r[2]?We[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:We[n]=[e,r[1],!0]),We[n]}return null},Pt=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},ds=e=>Pt(e,decodeURI),ur=e=>{const t=e.url,r=t.indexOf("/",t.indexOf(":")+4);let n=r;for(;n<t.length;n++){const i=t.charCodeAt(n);if(i===37){const l=t.indexOf("?",n),a=t.indexOf("#",n),c=l===-1?a===-1?void 0:a:a===-1?l:Math.min(l,a),o=t.slice(r,c);return ds(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(i===63||i===35)break}return t.slice(r,n)},hs=e=>{const t=ur(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},he=(e,t,...r)=>(r.length&&(t=he(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),fr=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let n="";return t.forEach(i=>{if(i!==""&&!/\:/.test(i))n+="/"+i;else if(/\:/.test(i))if(/\?/.test(i)){r.length===0&&n===""?r.push("/"):r.push(n);const l=i.replace("?","");n+="/"+l,r.push(n)}else n+="/"+i}),r.filter((i,l,a)=>a.indexOf(i)===l)},dt=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Pt(e,pr):e):e,gr=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let a=e.indexOf("?",8);if(a===-1)return;for(e.startsWith(t,a+1)||(a=e.indexOf(`&${t}`,a+1));a!==-1;){const c=e.charCodeAt(a+t.length+1);if(c===61){const o=a+t.length+2,d=e.indexOf("&",o);return dt(e.slice(o,d===-1?void 0:d))}else if(c==38||isNaN(c))return"";a=e.indexOf(`&${t}`,a+1)}if(n=/[%+]/.test(e),!n)return}const i={};n??(n=/[%+]/.test(e));let l=e.indexOf("?",8);for(;l!==-1;){const a=e.indexOf("&",l+1);let c=e.indexOf("=",l);c>a&&a!==-1&&(c=-1);let o=e.slice(l+1,c===-1?a===-1?void 0:a:c);if(n&&(o=dt(o)),l=a,o==="")continue;let d;c===-1?d="":(d=e.slice(c+1,a===-1?void 0:a),n&&(d=dt(d))),r?(i[o]&&Array.isArray(i[o])||(i[o]=[]),i[o].push(d)):i[o]??(i[o]=d)}return t?i[t]:i},us=gr,fs=(e,t)=>gr(e,t,!0),pr=decodeURIComponent,Ft=e=>Pt(e,pr),ge,N,z,vr,mr,bt,G,Gt,xr=(Gt=class{constructor(e,t="/",r=[[]]){E(this,z);v(this,"raw");E(this,ge);E(this,N);v(this,"routeIndex",0);v(this,"path");v(this,"bodyCache",{});E(this,G,e=>{const{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;const i=Object.keys(t)[0];return i?t[i].then(l=>(i==="json"&&(l=JSON.stringify(l)),new Response(l)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,y(this,N,r),y(this,ge,{})}param(e){return e?S(this,z,vr).call(this,e):S(this,z,mr).call(this)}query(e){return us(this.url,e)}queries(e){return fs(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await ts(this,e))}json(){return h(this,G).call(this,"text").then(e=>JSON.parse(e))}text(){return h(this,G).call(this,"text")}arrayBuffer(){return h(this,G).call(this,"arrayBuffer")}blob(){return h(this,G).call(this,"blob")}formData(){return h(this,G).call(this,"formData")}addValidatedData(e,t){h(this,ge)[e]=t}valid(e){return h(this,ge)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[es](){return h(this,N)}get matchedRoutes(){return h(this,N)[0].map(([[,e]])=>e)}get routePath(){return h(this,N)[0].map(([[,e]])=>e)[this.routeIndex].path}},ge=new WeakMap,N=new WeakMap,z=new WeakSet,vr=function(e){const t=h(this,N)[0][this.routeIndex][1][e],r=S(this,z,bt).call(this,t);return r&&/\%/.test(r)?Ft(r):r},mr=function(){const e={},t=Object.keys(h(this,N)[0][this.routeIndex][1]);for(const r of t){const n=S(this,z,bt).call(this,h(this,N)[0][this.routeIndex][1][r]);n!==void 0&&(e[r]=/\%/.test(n)?Ft(n):n)}return e},bt=function(e){return h(this,N)[1]?h(this,N)[1][e]:e},G=new WeakMap,Gt),gs="text/plain; charset=UTF-8",ht=(e,t)=>({"Content-Type":e,...t}),Le,Ne,q,pe,U,L,Me,xe,ve,se,De,Fe,J,ue,Jt,ps=(Jt=class{constructor(e,t){E(this,J);E(this,Le);E(this,Ne);v(this,"env",{});E(this,q);v(this,"finalized",!1);v(this,"error");E(this,pe);E(this,U);E(this,L);E(this,Me);E(this,xe);E(this,ve);E(this,se);E(this,De);E(this,Fe);v(this,"render",(...e)=>(h(this,xe)??y(this,xe,t=>this.html(t)),h(this,xe).call(this,...e)));v(this,"setLayout",e=>y(this,Me,e));v(this,"getLayout",()=>h(this,Me));v(this,"setRenderer",e=>{y(this,xe,e)});v(this,"header",(e,t,r)=>{this.finalized&&y(this,L,new Response(h(this,L).body,h(this,L)));const n=h(this,L)?h(this,L).headers:h(this,se)??y(this,se,new Headers);t===void 0?n.delete(e):r!=null&&r.append?n.append(e,t):n.set(e,t)});v(this,"status",e=>{y(this,pe,e)});v(this,"set",(e,t)=>{h(this,q)??y(this,q,new Map),h(this,q).set(e,t)});v(this,"get",e=>h(this,q)?h(this,q).get(e):void 0);v(this,"newResponse",(...e)=>S(this,J,ue).call(this,...e));v(this,"body",(e,t,r)=>S(this,J,ue).call(this,e,t,r));v(this,"text",(e,t,r)=>!h(this,se)&&!h(this,pe)&&!t&&!r&&!this.finalized?new Response(e):S(this,J,ue).call(this,e,t,ht(gs,r)));v(this,"json",(e,t,r)=>S(this,J,ue).call(this,JSON.stringify(e),t,ht("application/json",r)));v(this,"html",(e,t,r)=>{const n=i=>S(this,J,ue).call(this,i,t,ht("text/html; charset=UTF-8",r));return typeof e=="object"?sr(e,er.Stringify,!1,{}).then(n):n(e)});v(this,"redirect",(e,t)=>{const r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)});v(this,"notFound",()=>(h(this,ve)??y(this,ve,()=>new Response),h(this,ve).call(this,this)));y(this,Le,e),t&&(y(this,U,t.executionCtx),this.env=t.env,y(this,ve,t.notFoundHandler),y(this,Fe,t.path),y(this,De,t.matchResult))}get req(){return h(this,Ne)??y(this,Ne,new xr(h(this,Le),h(this,Fe),h(this,De))),h(this,Ne)}get event(){if(h(this,U)&&"respondWith"in h(this,U))return h(this,U);throw Error("This context has no FetchEvent")}get executionCtx(){if(h(this,U))return h(this,U);throw Error("This context has no ExecutionContext")}get res(){return h(this,L)||y(this,L,new Response(null,{headers:h(this,se)??y(this,se,new Headers)}))}set res(e){if(h(this,L)&&e){e=new Response(e.body,e);for(const[t,r]of h(this,L).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const n=h(this,L).headers.getSetCookie();e.headers.delete("set-cookie");for(const i of n)e.headers.append("set-cookie",i)}else e.headers.set(t,r)}y(this,L,e),this.finalized=!0}get var(){return h(this,q)?Object.fromEntries(h(this,q)):{}}},Le=new WeakMap,Ne=new WeakMap,q=new WeakMap,pe=new WeakMap,U=new WeakMap,L=new WeakMap,Me=new WeakMap,xe=new WeakMap,ve=new WeakMap,se=new WeakMap,De=new WeakMap,Fe=new WeakMap,J=new WeakSet,ue=function(e,t,r){const n=h(this,L)?new Headers(h(this,L).headers):h(this,se)??new Headers;if(typeof t=="object"&&"headers"in t){const l=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[a,c]of l)a.toLowerCase()==="set-cookie"?n.append(a,c):n.set(a,c)}if(r)for(const[l,a]of Object.entries(r))if(typeof a=="string")n.set(l,a);else{n.delete(l);for(const c of a)n.append(l,c)}const i=typeof t=="number"?t:(t==null?void 0:t.status)??h(this,pe);return new Response(e,{status:i,headers:n})},Jt),O="ALL",xs="all",vs=["get","post","put","delete","options","patch"],br="Can not add a route since the matcher is already built.",yr=class extends Error{},ms="__COMPOSED_HANDLER",bs=e=>e.text("404 Not Found",404),Ht=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},D,j,wr,F,te,Je,Xe,me,ys=(me=class{constructor(t={}){E(this,j);v(this,"get");v(this,"post");v(this,"put");v(this,"delete");v(this,"options");v(this,"patch");v(this,"all");v(this,"on");v(this,"use");v(this,"router");v(this,"getPath");v(this,"_basePath","/");E(this,D,"/");v(this,"routes",[]);E(this,F,bs);v(this,"errorHandler",Ht);v(this,"onError",t=>(this.errorHandler=t,this));v(this,"notFound",t=>(y(this,F,t),this));v(this,"fetch",(t,...r)=>S(this,j,Xe).call(this,t,r[1],r[0],t.method));v(this,"request",(t,r,n,i)=>t instanceof Request?this.fetch(r?new Request(t,r):t,n,i):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${he("/",t)}`,r),n,i)));v(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(S(this,j,Xe).call(this,t.request,t,void 0,t.request.method))})});[...vs,xs].forEach(l=>{this[l]=(a,...c)=>(typeof a=="string"?y(this,D,a):S(this,j,te).call(this,l,h(this,D),a),c.forEach(o=>{S(this,j,te).call(this,l,h(this,D),o)}),this)}),this.on=(l,a,...c)=>{for(const o of[a].flat()){y(this,D,o);for(const d of[l].flat())c.map(u=>{S(this,j,te).call(this,d.toUpperCase(),h(this,D),u)})}return this},this.use=(l,...a)=>(typeof l=="string"?y(this,D,l):(y(this,D,"*"),a.unshift(l)),a.forEach(c=>{S(this,j,te).call(this,O,h(this,D),c)}),this);const{strict:n,...i}=t;Object.assign(this,i),this.getPath=n??!0?t.getPath??ur:hs}route(t,r){const n=this.basePath(t);return r.routes.map(i=>{var a;let l;r.errorHandler===Ht?l=i.handler:(l=async(c,o)=>(await Dt([],r.errorHandler)(c,()=>i.handler(c,o))).res,l[ms]=i.handler),S(a=n,j,te).call(a,i.method,i.path,l)}),this}basePath(t){const r=S(this,j,wr).call(this);return r._basePath=he(this._basePath,t),r}mount(t,r,n){let i,l;n&&(typeof n=="function"?l=n:(l=n.optionHandler,n.replaceRequest===!1?i=o=>o:i=n.replaceRequest));const a=l?o=>{const d=l(o);return Array.isArray(d)?d:[d]}:o=>{let d;try{d=o.executionCtx}catch{}return[o.env,d]};i||(i=(()=>{const o=he(this._basePath,t),d=o==="/"?0:o.length;return u=>{const f=new URL(u.url);return f.pathname=f.pathname.slice(d)||"/",new Request(f,u)}})());const c=async(o,d)=>{const u=await r(i(o.req.raw),...a(o));if(u)return u;await d()};return S(this,j,te).call(this,O,he(t,"*"),c),this}},D=new WeakMap,j=new WeakSet,wr=function(){const t=new me({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,y(t,F,h(this,F)),t.routes=this.routes,t},F=new WeakMap,te=function(t,r,n){t=t.toUpperCase(),r=he(this._basePath,r);const i={basePath:this._basePath,path:r,method:t,handler:n};this.router.add(t,r,[n,i]),this.routes.push(i)},Je=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},Xe=function(t,r,n,i){if(i==="HEAD")return(async()=>new Response(null,await S(this,j,Xe).call(this,t,r,n,"GET")))();const l=this.getPath(t,{env:n}),a=this.router.match(i,l),c=new ps(t,{path:l,matchResult:a,env:n,executionCtx:r,notFoundHandler:h(this,F)});if(a[0].length===1){let d;try{d=a[0][0][0][0](c,async()=>{c.res=await h(this,F).call(this,c)})}catch(u){return S(this,j,Je).call(this,u,c)}return d instanceof Promise?d.then(u=>u||(c.finalized?c.res:h(this,F).call(this,c))).catch(u=>S(this,j,Je).call(this,u,c)):d??h(this,F).call(this,c)}const o=Dt(a[0],this.errorHandler,h(this,F));return(async()=>{try{const d=await o(c);if(!d.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return d.res}catch(d){return S(this,j,Je).call(this,d,c)}})()},me),Er=[];function ws(e,t){const r=this.buildAllMatchers(),n=((i,l)=>{const a=r[i]||r[O],c=a[2][l];if(c)return c;const o=l.match(a[0]);if(!o)return[[],Er];const d=o.indexOf("",1);return[a[1][d],o]});return this.match=n,n(e,t)}var rt="[^/]+",Ae=".*",Oe="(?:|/.*)",fe=Symbol(),Es=new Set(".\\+*[^]$()");function ks(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Ae||e===Oe?1:t===Ae||t===Oe?-1:e===rt?1:t===rt?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var ne,ie,H,ce,Ss=(ce=class{constructor(){E(this,ne);E(this,ie);E(this,H,Object.create(null))}insert(t,r,n,i,l){if(t.length===0){if(h(this,ne)!==void 0)throw fe;if(l)return;y(this,ne,r);return}const[a,...c]=t,o=a==="*"?c.length===0?["","",Ae]:["","",rt]:a==="/*"?["","",Oe]:a.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let d;if(o){const u=o[1];let f=o[2]||rt;if(u&&o[2]&&(f===".*"||(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f))))throw fe;if(d=h(this,H)[f],!d){if(Object.keys(h(this,H)).some(g=>g!==Ae&&g!==Oe))throw fe;if(l)return;d=h(this,H)[f]=new ce,u!==""&&y(d,ie,i.varIndex++)}!l&&u!==""&&n.push([u,h(d,ie)])}else if(d=h(this,H)[a],!d){if(Object.keys(h(this,H)).some(u=>u.length>1&&u!==Ae&&u!==Oe))throw fe;if(l)return;d=h(this,H)[a]=new ce}d.insert(c,r,n,i,l)}buildRegExpStr(){const r=Object.keys(h(this,H)).sort(ks).map(n=>{const i=h(this,H)[n];return(typeof h(i,ie)=="number"?`(${n})@${h(i,ie)}`:Es.has(n)?`\\${n}`:n)+i.buildRegExpStr()});return typeof h(this,ne)=="number"&&r.unshift(`#${h(this,ne)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},ne=new WeakMap,ie=new WeakMap,H=new WeakMap,ce),st,He,Xt,Rs=(Xt=class{constructor(){E(this,st,{varIndex:0});E(this,He,new Ss)}insert(e,t,r){const n=[],i=[];for(let a=0;;){let c=!1;if(e=e.replace(/\{[^}]+\}/g,o=>{const d=`@\\${a}`;return i[a]=[d,o],a++,c=!0,d}),!c)break}const l=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=i.length-1;a>=0;a--){const[c]=i[a];for(let o=l.length-1;o>=0;o--)if(l[o].indexOf(c)!==-1){l[o]=l[o].replace(c,i[a][1]);break}}return h(this,He).insert(l,t,n,h(this,st),r),n}buildRegExp(){let e=h(this,He).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(i,l,a)=>l!==void 0?(r[++t]=Number(l),"$()"):(a!==void 0&&(n[Number(a)]=++t),"")),[new RegExp(`^${e}`),r,n]}},st=new WeakMap,He=new WeakMap,Xt),Ps=[/^$/,[],Object.create(null)],Ze=Object.create(null);function kr(e){return Ze[e]??(Ze[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function Cs(){Ze=Object.create(null)}function As(e){var d;const t=new Rs,r=[];if(e.length===0)return Ps;const n=e.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,f],[g,p])=>u?1:g?-1:f.length-p.length),i=Object.create(null);for(let u=0,f=-1,g=n.length;u<g;u++){const[p,m,b]=n[u];p?i[m]=[b.map(([w])=>[w,Object.create(null)]),Er]:f++;let x;try{x=t.insert(m,f,p)}catch(w){throw w===fe?new yr(m):w}p||(r[f]=b.map(([w,k])=>{const P=Object.create(null);for(k-=1;k>=0;k--){const[R,C]=x[k];P[R]=C}return[w,P]}))}const[l,a,c]=t.buildRegExp();for(let u=0,f=r.length;u<f;u++)for(let g=0,p=r[u].length;g<p;g++){const m=(d=r[u][g])==null?void 0:d[1];if(!m)continue;const b=Object.keys(m);for(let x=0,w=b.length;x<w;x++)m[b[x]]=c[m[b[x]]]}const o=[];for(const u in a)o[u]=r[a[u]];return[l,o,i]}function oe(e,t){if(e){for(const r of Object.keys(e).sort((n,i)=>i.length-n.length))if(kr(r).test(t))return[...e[r]]}}var X,Z,nt,Sr,Zt,Os=(Zt=class{constructor(){E(this,nt);v(this,"name","RegExpRouter");E(this,X);E(this,Z);v(this,"match",ws);y(this,X,{[O]:Object.create(null)}),y(this,Z,{[O]:Object.create(null)})}add(e,t,r){var c;const n=h(this,X),i=h(this,Z);if(!n||!i)throw new Error(br);n[e]||[n,i].forEach(o=>{o[e]=Object.create(null),Object.keys(o[O]).forEach(d=>{o[e][d]=[...o[O][d]]})}),t==="/*"&&(t="*");const l=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const o=kr(t);e===O?Object.keys(n).forEach(d=>{var u;(u=n[d])[t]||(u[t]=oe(n[d],t)||oe(n[O],t)||[])}):(c=n[e])[t]||(c[t]=oe(n[e],t)||oe(n[O],t)||[]),Object.keys(n).forEach(d=>{(e===O||e===d)&&Object.keys(n[d]).forEach(u=>{o.test(u)&&n[d][u].push([r,l])})}),Object.keys(i).forEach(d=>{(e===O||e===d)&&Object.keys(i[d]).forEach(u=>o.test(u)&&i[d][u].push([r,l]))});return}const a=fr(t)||[t];for(let o=0,d=a.length;o<d;o++){const u=a[o];Object.keys(i).forEach(f=>{var g;(e===O||e===f)&&((g=i[f])[u]||(g[u]=[...oe(n[f],u)||oe(n[O],u)||[]]),i[f][u].push([r,l-d+o+1]))})}}buildAllMatchers(){const e=Object.create(null);return Object.keys(h(this,Z)).concat(Object.keys(h(this,X))).forEach(t=>{e[t]||(e[t]=S(this,nt,Sr).call(this,t))}),y(this,X,y(this,Z,void 0)),Cs(),e}},X=new WeakMap,Z=new WeakMap,nt=new WeakSet,Sr=function(e){const t=[];let r=e===O;return[h(this,X),h(this,Z)].forEach(n=>{const i=n[e]?Object.keys(n[e]).map(l=>[l,n[e][l]]):[];i.length!==0?(r||(r=!0),t.push(...i)):e!==O&&t.push(...Object.keys(n[O]).map(l=>[l,n[O][l]]))}),r?As(t):null},Zt),Y,W,Yt,js=(Yt=class{constructor(e){v(this,"name","SmartRouter");E(this,Y,[]);E(this,W,[]);y(this,Y,e.routers)}add(e,t,r){if(!h(this,W))throw new Error(br);h(this,W).push([e,t,r])}match(e,t){if(!h(this,W))throw new Error("Fatal error");const r=h(this,Y),n=h(this,W),i=r.length;let l=0,a;for(;l<i;l++){const c=r[l];try{for(let o=0,d=n.length;o<d;o++)c.add(...n[o]);a=c.match(e,t)}catch(o){if(o instanceof yr)continue;throw o}this.match=c.match.bind(c),y(this,Y,[c]),y(this,W,void 0);break}if(l===i)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(h(this,W)||h(this,Y).length!==1)throw new Error("No active router has been determined yet.");return h(this,Y)[0]}},Y=new WeakMap,W=new WeakMap,Yt),Pe=Object.create(null),Q,$,le,be,T,K,re,ye,Ts=(ye=class{constructor(t,r,n){E(this,K);E(this,Q);E(this,$);E(this,le);E(this,be,0);E(this,T,Pe);if(y(this,$,n||Object.create(null)),y(this,Q,[]),t&&r){const i=Object.create(null);i[t]={handler:r,possibleKeys:[],score:0},y(this,Q,[i])}y(this,le,[])}insert(t,r,n){y(this,be,++jt(this,be)._);let i=this;const l=ls(r),a=[];for(let c=0,o=l.length;c<o;c++){const d=l[c],u=l[c+1],f=os(d,u),g=Array.isArray(f)?f[0]:d;if(g in h(i,$)){i=h(i,$)[g],f&&a.push(f[1]);continue}h(i,$)[g]=new ye,f&&(h(i,le).push(f),a.push(f[1])),i=h(i,$)[g]}return h(i,Q).push({[t]:{handler:n,possibleKeys:a.filter((c,o,d)=>d.indexOf(c)===o),score:h(this,be)}}),i}search(t,r){var o;const n=[];y(this,T,Pe);let l=[this];const a=hr(r),c=[];for(let d=0,u=a.length;d<u;d++){const f=a[d],g=d===u-1,p=[];for(let m=0,b=l.length;m<b;m++){const x=l[m],w=h(x,$)[f];w&&(y(w,T,h(x,T)),g?(h(w,$)["*"]&&n.push(...S(this,K,re).call(this,h(w,$)["*"],t,h(x,T))),n.push(...S(this,K,re).call(this,w,t,h(x,T)))):p.push(w));for(let k=0,P=h(x,le).length;k<P;k++){const R=h(x,le)[k],C=h(x,T)===Pe?{}:{...h(x,T)};if(R==="*"){const V=h(x,$)["*"];V&&(n.push(...S(this,K,re).call(this,V,t,h(x,T))),y(V,T,C),p.push(V));continue}const[Se,Ue,Re]=R;if(!f&&!(Re instanceof RegExp))continue;const _=h(x,$)[Se],Mr=a.slice(d).join("/");if(Re instanceof RegExp){const V=Re.exec(Mr);if(V){if(C[Ue]=V[0],n.push(...S(this,K,re).call(this,_,t,h(x,T),C)),Object.keys(h(_,$)).length){y(_,T,C);const lt=((o=V[0].match(/\//))==null?void 0:o.length)??0;(c[lt]||(c[lt]=[])).push(_)}continue}}(Re===!0||Re.test(f))&&(C[Ue]=f,g?(n.push(...S(this,K,re).call(this,_,t,C,h(x,T))),h(_,$)["*"]&&n.push(...S(this,K,re).call(this,h(_,$)["*"],t,C,h(x,T)))):(y(_,T,C),p.push(_)))}}l=p.concat(c.shift()??[])}return n.length>1&&n.sort((d,u)=>d.score-u.score),[n.map(({handler:d,params:u})=>[d,u])]}},Q=new WeakMap,$=new WeakMap,le=new WeakMap,be=new WeakMap,T=new WeakMap,K=new WeakSet,re=function(t,r,n,i){const l=[];for(let a=0,c=h(t,Q).length;a<c;a++){const o=h(t,Q)[a],d=o[r]||o[O],u={};if(d!==void 0&&(d.params=Object.create(null),l.push(d),n!==Pe||i&&i!==Pe))for(let f=0,g=d.possibleKeys.length;f<g;f++){const p=d.possibleKeys[f],m=u[d.score];d.params[p]=i!=null&&i[p]&&!m?i[p]:n[p]??(i==null?void 0:i[p]),u[d.score]=!0}}return l},ye),ae,Qt,$s=(Qt=class{constructor(){v(this,"name","TrieRouter");E(this,ae);y(this,ae,new Ts)}add(e,t,r){const n=fr(t);if(n){for(let i=0,l=n.length;i<l;i++)h(this,ae).insert(e,n[i],r);return}h(this,ae).insert(e,t,r)}match(e,t){return h(this,ae).search(e,t)}},ae=new WeakMap,Qt),Rr=class extends ys{constructor(e={}){super(e),this.router=e.router??new js({routers:[new Os,new $s]})}},Te="_hp",Ls={Change:"Input",DoubleClick:"DblClick"},Ns={svg:"2000/svg",math:"1998/Math/MathML"},$e=[],yt=new WeakMap,Ee=void 0,Ms=()=>Ee,B=e=>"t"in e,ut={onClick:["click",!1]},It=e=>{if(!e.startsWith("on"))return;if(ut[e])return ut[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,n]=t;return ut[e]=[(Ls[r]||r).toLowerCase(),!!n]}},_t=(e,t)=>Ee&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Ds=(e,t,r)=>{var n;t||(t={});for(let i in t){const l=t[i];if(i!=="children"&&(!r||r[i]!==l)){i=tt(i);const a=It(i);if(a){if((r==null?void 0:r[i])!==l&&(r&&e.removeEventListener(a[0],r[i],a[1]),l!=null)){if(typeof l!="function")throw new Error(`Event handler for "${i}" is not a function`);e.addEventListener(a[0],l,a[1])}}else if(i==="dangerouslySetInnerHTML"&&l)e.innerHTML=l.__html;else if(i==="ref"){let c;typeof l=="function"?c=l(e)||(()=>l(null)):l&&"current"in l&&(l.current=e,c=()=>l.current=null),yt.set(e,c)}else if(i==="style"){const c=e.style;typeof l=="string"?c.cssText=l:(c.cssText="",l!=null&&or(l,c.setProperty.bind(c)))}else{if(i==="value"){const o=e.nodeName;if(o==="INPUT"||o==="TEXTAREA"||o==="SELECT"){if(e.value=l==null||l===!1?null:l,o==="TEXTAREA"){e.textContent=l;continue}else if(o==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(i==="checked"&&e.nodeName==="INPUT"||i==="selected"&&e.nodeName==="OPTION")&&(e[i]=l);const c=_t(e,i);l==null||l===!1?e.removeAttribute(c):l===!0?e.setAttribute(c,""):typeof l=="string"||typeof l=="number"?e.setAttribute(c,l):e.setAttribute(c,l.toString())}}}if(r)for(let i in r){const l=r[i];if(i!=="children"&&!(i in t)){i=tt(i);const a=It(i);a?e.removeEventListener(a[0],l,a[1]):i==="ref"?(n=yt.get(e))==null||n():e.removeAttribute(_t(e,i))}}},Fs=(e,t)=>{t[A][0]=0,$e.push([e,t]);const r=t.tag[Et]||t.tag,n=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,n)]}finally{$e.pop()}},Pr=(e,t,r,n,i)=>{var l,a;(l=e.vR)!=null&&l.length&&(n.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((a=e[A][1][jr])==null||a.forEach(c=>i.push(c))),e.vC.forEach(c=>{var o;if(B(c))r.push(c);else if(typeof c.tag=="function"||c.tag===""){c.c=t;const d=r.length;if(Pr(c,t,r,n,i),c.s){for(let u=d;u<r.length;u++)r[u].s=!0;c.s=!1}}else r.push(c),(o=c.vR)!=null&&o.length&&(n.push(...c.vR),delete c.vR)})},Hs=e=>{var t;for(;e&&(e.tag===Te||!e.e);)e=e.tag===Te||!((t=e.vC)!=null&&t[0])?e.nN:e.vC[0];return e==null?void 0:e.e},Cr=e=>{var t,r,n,i,l,a;B(e)||((r=(t=e[A])==null?void 0:t[1][jr])==null||r.forEach(c=>{var o;return(o=c[2])==null?void 0:o.call(c)}),(n=yt.get(e.e))==null||n(),e.p===2&&((i=e.vC)==null||i.forEach(c=>c.p=2)),(l=e.vC)==null||l.forEach(Cr)),e.p||((a=e.e)==null||a.remove(),delete e.e),typeof e.tag=="function"&&(Ce.delete(e),Ye.delete(e),delete e[A][3],e.a=!0)},Ar=(e,t,r)=>{e.c=t,Or(e,t,r)},Bt=(e,t)=>{if(t){for(let r=0,n=e.length;r<n;r++)if(e[r]===t)return r}},qt=Symbol(),Or=(e,t,r)=>{var d;const n=[],i=[],l=[];Pr(e,t,n,i,l),i.forEach(Cr);const a=r?void 0:t.childNodes;let c,o=null;if(r)c=-1;else if(!a.length)c=0;else{const u=Bt(a,Hs(e.nN));u!==void 0?(o=a[u],c=u):c=Bt(a,(d=n.find(f=>f.tag!==Te&&f.e))==null?void 0:d.e)??-1,c===-1&&(r=!0)}for(let u=0,f=n.length;u<f;u++,c++){const g=n[u];let p;if(g.s&&g.e)p=g.e,g.s=!1;else{const m=r||!g.e;B(g)?(g.e&&g.d&&(g.e.textContent=g.t),g.d=!1,p=g.e||(g.e=document.createTextNode(g.t))):(p=g.e||(g.e=g.n?document.createElementNS(g.n,g.tag):document.createElement(g.tag)),Ds(p,g.props,g.pP),Or(g,p,m))}g.tag===Te?c--:r?p.parentNode||t.appendChild(p):a[c]!==p&&a[c-1]!==p&&(a[c+1]===p?t.appendChild(a[c]):t.insertBefore(p,o||a[c]||null))}if(e.pP&&(e.pP=void 0),l.length){const u=[],f=[];l.forEach(([,g,,p,m])=>{g&&u.push(g),p&&f.push(p),m==null||m()}),u.forEach(g=>g()),f.length&&requestAnimationFrame(()=>{f.forEach(g=>g())})}},Is=(e,t)=>!!(e&&e.length===t.length&&e.every((r,n)=>r[1]===t[n][1])),Ye=new WeakMap,wt=(e,t,r)=>{var l,a,c,o,d,u;const n=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let i;try{r||(r=typeof t.tag=="function"?Fs(e,t):Ie(t.props.children)),((l=r[0])==null?void 0:l.tag)===""&&r[0][vt]&&(i=r[0][vt],e[5].push([e,i,t]));const f=n?[...t.pC]:t.vC?[...t.vC]:void 0,g=[];let p;for(let m=0;m<r.length;m++){Array.isArray(r[m])&&r.splice(m,1,...r[m].flat());let b=_s(r[m]);if(b){typeof b.tag=="function"&&!b.tag[nr]&&(we.length>0&&(b[A][2]=we.map(w=>[w,w.values.at(-1)])),(a=e[5])!=null&&a.length&&(b[A][3]=e[5].at(-1)));let x;if(f&&f.length){const w=f.findIndex(B(b)?k=>B(k):b.key!==void 0?k=>k.key===b.key&&k.tag===b.tag:k=>k.tag===b.tag);w!==-1&&(x=f[w],f.splice(w,1))}if(x)if(B(b))x.t!==b.t&&(x.t=b.t,x.d=!0),b=x;else{const w=x.pP=x.props;if(x.props=b.props,x.f||(x.f=b.f||t.f),typeof b.tag=="function"){const k=x[A][2];x[A][2]=b[A][2]||[],x[A][3]=b[A][3],!x.f&&((x.o||x)===b.o||(o=(c=x.tag)[_r])!=null&&o.call(c,w,x.props))&&Is(k,x[A][2])&&(x.s=!0)}b=x}else if(!B(b)&&Ee){const w=ke(Ee);w&&(b.n=w)}if(!B(b)&&!b.s&&(wt(e,b),delete b.f),g.push(b),p&&!p.s&&!b.s)for(let w=p;w&&!B(w);w=(d=w.vC)==null?void 0:d.at(-1))w.nN=b;p=b}}t.vR=n?[...t.vC,...f||[]]:f||[],t.vC=g,n&&delete t.pC}catch(f){if(t.f=!0,f===qt){if(i)return;throw f}const[g,p,m]=((u=t[A])==null?void 0:u[3])||[];if(p){const b=()=>Qe([0,!1,e[2]],m),x=Ye.get(m)||[];x.push(b),Ye.set(m,x);const w=p(f,()=>{const k=Ye.get(m);if(k){const P=k.indexOf(b);if(P!==-1)return k.splice(P,1),b()}});if(w){if(e[0]===1)e[1]=!0;else if(wt(e,m,[w]),(p.length===1||e!==g)&&m.c){Ar(m,m.c,!1);return}throw qt}}throw f}finally{i&&e[5].pop()}},_s=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[A]=[0,[]];else{const t=Ns[e.tag];t&&(Ee||(Ee=lr("")),e.props.children=[{tag:Ee,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},Ut=(e,t)=>{var r,n;(r=t[A][2])==null||r.forEach(([i,l])=>{i.values.push(l)});try{wt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(n=t[A][2])==null||n.forEach(([i])=>{i.values.pop()}),(e[0]!==1||!e[1])&&Ar(t,t.c,!1)},Ce=new WeakMap,Wt=[],Qe=async(e,t)=>{e[5]||(e[5]=[]);const r=Ce.get(t);r&&r[0](void 0);let n;const i=new Promise(l=>n=l);if(Ce.set(t,[n,()=>{e[2]?e[2](e,t,l=>{Ut(l,t)}).then(()=>n(t)):(Ut(e,t),n(t))}]),Wt.length)Wt.at(-1).add(t);else{await Promise.resolve();const l=Ce.get(t);l&&(Ce.delete(t),l[1]())}return i},Bs=(e,t,r)=>({tag:Te,props:{children:e},key:r,e:t,p:1}),ft=0,jr=1,gt=2,pt=3,xt=new WeakMap,Tr=(e,t)=>!e||!t||e.length!==t.length||t.some((r,n)=>r!==e[n]),qs=void 0,Kt=[],Us=e=>{var a;const t=()=>typeof e=="function"?e():e,r=$e.at(-1);if(!r)return[t(),()=>{}];const[,n]=r,i=(a=n[A][1])[ft]||(a[ft]=[]),l=n[A][0]++;return i[l]||(i[l]=[t(),c=>{const o=qs,d=i[l];if(typeof c=="function"&&(c=c(d[0])),!Object.is(c,d[0]))if(d[0]=c,Kt.length){const[u,f]=Kt.at(-1);Promise.all([u===3?n:Qe([u,!1,o],n),f]).then(([g])=>{if(!g||!(u===2||u===3))return;const p=g.vC;requestAnimationFrame(()=>{setTimeout(()=>{p===g.vC&&Qe([u===3?1:0,!1,o],g)})})})}else Qe([0,!1,o],n)}])},Ct=(e,t)=>{var c;const r=$e.at(-1);if(!r)return e;const[,n]=r,i=(c=n[A][1])[gt]||(c[gt]=[]),l=n[A][0]++,a=i[l];return Tr(a==null?void 0:a[1],t)?i[l]=[e,t]:e=i[l][0],e},Ws=e=>{const t=xt.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>xt.set(e,[r]),r=>xt.set(e,[void 0,r])),e},Ks=(e,t)=>{var c;const r=$e.at(-1);if(!r)return e();const[,n]=r,i=(c=n[A][1])[pt]||(c[pt]=[]),l=n[A][0]++,a=i[l];return Tr(a==null?void 0:a[1],t)&&(i[l]=[e(),t]),i[l][0]},zs=lr({pending:!1,data:null,method:null,action:null}),zt=new Set,Vs=e=>{zt.add(e),e.finally(()=>zt.delete(e))},At=(e,t)=>Ks(()=>r=>{let n;e&&(typeof e=="function"?n=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,n=()=>{e.current=null}));const i=t(r);return()=>{i==null||i(),n==null||n()}},[e]),de=Object.create(null),Ke=Object.create(null),qe=(e,t,r,n,i)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const l=document.head;let{onLoad:a,onError:c,precedence:o,blocking:d,...u}=t,f=null,g=!1;const p=ze[e];let m;if(p.length>0){const k=l.querySelectorAll(e);e:for(const P of k)for(const R of ze[e])if(P.getAttribute(R)===t[R]){f=P;break e}if(!f){const P=p.reduce((R,C)=>t[C]===void 0?R:`${R}-${C}-${t[C]}`,e);g=!Ke[P],f=Ke[P]||(Ke[P]=(()=>{const R=document.createElement(e);for(const C of p)t[C]!==void 0&&R.setAttribute(C,t[C]),t.rel&&R.setAttribute("rel",t.rel);return R})())}}else m=l.querySelectorAll(e);o=n?o??"":void 0,n&&(u[Ve]=o);const b=Ct(k=>{if(p.length>0){let P=!1;for(const R of l.querySelectorAll(e)){if(P&&R.getAttribute(Ve)!==o){l.insertBefore(k,R);return}R.getAttribute(Ve)===o&&(P=!0)}l.appendChild(k)}else if(m){let P=!1;for(const R of m)if(R===k){P=!0;break}P||l.insertBefore(k,l.contains(m[0])?m[0]:l.querySelector(e)),m=void 0}},[o]),x=At(t.ref,k=>{var C;const P=p[0];if(r===2&&(k.innerHTML=""),(g||m)&&b(k),!c&&!a)return;let R=de[C=k.getAttribute(P)]||(de[C]=new Promise((Se,Ue)=>{k.addEventListener("load",Se),k.addEventListener("error",Ue)}));a&&(R=R.then(a)),c&&(R=R.catch(c)),R.catch(()=>{})});if(i&&d==="render"){const k=ze[e][0];if(t[k]){const P=t[k],R=de[P]||(de[P]=new Promise((C,Se)=>{b(f),f.addEventListener("load",C),f.addEventListener("error",Se)}));Ws(R)}}const w={tag:e,type:e,props:{...u,ref:x},ref:x};return w.p=r,f&&(w.e=f),Bs(w,l)},Gs=e=>{const t=Ms(),r=t&&ke(t);return r!=null&&r.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:qe("title",e,void 0,!1,!1)},Js=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:qe("script",e,1,!1,!0),Xs=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,qe("style",e,2,!0,!0)),Zs=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:qe("link",e,1,"precedence"in e,!0),Ys=e=>qe("meta",e,void 0,!1,!1),$r=Symbol(),Qs=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[n,i]=Us([null,!1]),l=Ct(async d=>{const u=d.isTrusted?t:d.detail[$r];if(typeof u!="function")return;d.preventDefault();const f=new FormData(d.target);i([f,!0]);const g=u(f);g instanceof Promise&&(Vs(g),await g),i([null,!0])},[]),a=At(e.ref,d=>(d.addEventListener("submit",l),()=>{d.removeEventListener("submit",l)})),[c,o]=n;return n[1]=!1,{tag:zs,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?t:null},children:{tag:"form",props:{...r,ref:a},type:"form",ref:a}},f:o}},Lr=(e,{formAction:t,...r})=>{if(typeof t=="function"){const n=Ct(i=>{i.preventDefault(),i.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[$r]:t}}))},[]);r.ref=At(r.ref,i=>(i.addEventListener("click",n),()=>{i.removeEventListener("click",n)}))}return{tag:e,props:r,type:e,ref:r.ref}},en=e=>Lr("input",e),tn=e=>Lr("button",e);Object.assign(mt,{title:Gs,script:Js,style:Xs,link:Zs,meta:Ys,form:Qs,input:en,button:tn});kt(null);new TextEncoder;var rn=kt(null),sn=(e,t,r,n)=>(i,l)=>{const a="<!DOCTYPE html>",c=r?Nt(d=>r(d,e),{Layout:t,...l},i):i,o=Ir`${M(a)}${Nt(rn.Provider,{value:e},c)}`;return e.html(o)},nn=(e,t)=>function(n,i){const l=n.getLayout()??Qr;return e&&n.setLayout(a=>e({...a,Layout:l},n)),n.setRenderer(sn(n,l,e)),i()};const ln=nn(({children:e})=>s("html",{lang:"ja",children:[s("head",{children:[s("meta",{charset:"UTF-8"}),s("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),s("title",{children:"航空券予約システム - Flight Booking"}),s("script",{src:"https://cdn.tailwindcss.com"}),s("link",{href:"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css",rel:"stylesheet"}),s("link",{href:"/static/style.css",rel:"stylesheet"})]}),s("body",{children:e})]})),it=new Rr;it.use(ln);it.get("/",e=>e.render(s("div",{class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col",children:[s("header",{class:"bg-blue-600 text-white shadow-lg flex-shrink-0",children:s("div",{class:"container mx-auto px-4 py-4",children:s("div",{class:"flex items-center justify-between",children:[s("div",{class:"flex items-center space-x-2",children:[s("i",{class:"fas fa-plane text-3xl"}),s("h1",{class:"text-2xl font-bold",children:"FlightSearch"})]}),s("nav",{class:"hidden md:flex space-x-6",children:[s("a",{href:"/",class:"hover:text-blue-200 transition",children:"ホーム"}),s("a",{href:"#",class:"hover:text-blue-200 transition",children:"予約確認"}),s("a",{href:"#",class:"hover:text-blue-200 transition",children:"お問い合わせ"})]})]})})}),s("main",{id:"mainContent",class:"flex-grow",children:s("div",{class:"container mx-auto px-4 py-8",children:[s("div",{class:"text-center mb-8",children:[s("h2",{class:"text-4xl font-bold text-gray-800 mb-2",children:"お得な航空券を検索"}),s("p",{class:"text-gray-600",children:"世界中のフライトを比較して、最安値を見つけましょう"})]}),s("div",{class:"bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-8",children:[s("div",{class:"flex flex-wrap gap-4 mb-6",children:[s("label",{class:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tripType",value:"roundtrip",checked:!0,class:"w-4 h-4 text-blue-600"}),s("span",{class:"text-gray-700 font-medium",children:"往復"})]}),s("label",{class:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tripType",value:"oneway",class:"w-4 h-4 text-blue-600"}),s("span",{class:"text-gray-700 font-medium",children:"片道"})]}),s("label",{class:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"tripType",value:"multicity",class:"w-4 h-4 text-blue-600"}),s("span",{class:"text-gray-700 font-medium",children:"複数都市"})]})]}),s("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s("div",{class:"relative",children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"出発地"}),s("div",{class:"relative",children:[s("i",{class:"fas fa-plane-departure absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s("input",{type:"text",id:"fromLocation",placeholder:"東京 (TYO)",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s("div",{class:"relative",children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"目的地"}),s("div",{class:"relative",children:[s("i",{class:"fas fa-plane-arrival absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s("input",{type:"text",id:"toLocation",placeholder:"ニューヨーク (JFK)",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s("div",{class:"relative",children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"出発日"}),s("div",{class:"relative",children:[s("i",{class:"fas fa-calendar-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s("input",{type:"date",id:"departureDate",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s("div",{class:"relative",id:"returnDateField",children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"帰国日"}),s("div",{class:"relative",children:[s("i",{class:"fas fa-calendar-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s("input",{type:"date",id:"returnDate",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s("div",{class:"relative",children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"乗客"}),s("button",{type:"button",id:"passengerButton",class:"w-full px-4 py-3 border border-gray-300 rounded-lg text-left flex items-center justify-between hover:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s("span",{class:"flex items-center",children:[s("i",{class:"fas fa-user mr-2 text-gray-400"}),s("span",{id:"passengerDisplay",children:"1 名, エコノミー"})]}),s("i",{class:"fas fa-chevron-down text-gray-400"})]}),s("div",{id:"passengerDropdown",class:"hidden absolute z-10 mt-2 w-full md:w-96 bg-white border border-gray-200 rounded-lg shadow-xl p-4",children:s("div",{class:"space-y-4",children:[s("div",{class:"flex items-center justify-between",children:[s("div",{children:[s("div",{class:"font-medium text-gray-700",children:"大人"}),s("div",{class:"text-sm text-gray-500",children:"12歳以上"})]}),s("div",{class:"flex items-center space-x-3",children:[s("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('adults', -1)",children:"-"}),s("span",{id:"adultsCount",class:"w-8 text-center font-medium",children:"1"}),s("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('adults', 1)",children:"+"})]})]}),s("div",{class:"flex items-center justify-between",children:[s("div",{children:[s("div",{class:"font-medium text-gray-700",children:"子供"}),s("div",{class:"text-sm text-gray-500",children:"2-11歳"})]}),s("div",{class:"flex items-center space-x-3",children:[s("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('children', -1)",children:"-"}),s("span",{id:"childrenCount",class:"w-8 text-center font-medium",children:"0"}),s("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('children', 1)",children:"+"})]})]}),s("div",{class:"flex items-center justify-between",children:[s("div",{children:[s("div",{class:"font-medium text-gray-700",children:"幼児"}),s("div",{class:"text-sm text-gray-500",children:"2歳未満"})]}),s("div",{class:"flex items-center space-x-3",children:[s("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('infants', -1)",children:"-"}),s("span",{id:"infantsCount",class:"w-8 text-center font-medium",children:"0"}),s("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('infants', 1)",children:"+"})]})]}),s("hr",{class:"my-4"}),s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"座席クラス"}),s("select",{id:"cabinClass",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"economy",children:"エコノミー"}),s("option",{value:"premium_economy",children:"プレミアムエコノミー"}),s("option",{value:"business",children:"ビジネス"}),s("option",{value:"first",children:"ファースト"})]})]}),s("button",{type:"button",class:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",onclick:"closePassengerDropdown()",children:"完了"})]})})]}),s("div",{class:"flex items-end",children:s("label",{class:"flex items-center space-x-2 cursor-pointer pb-3",children:[s("input",{type:"checkbox",id:"directFlights",class:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),s("span",{class:"text-gray-700",children:"直行便のみ"})]})}),s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2 opacity-0",children:"検索"}),s("button",{type:"button",onclick:"searchFlights()",class:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition shadow-lg hover:shadow-xl",children:[s("i",{class:"fas fa-search mr-2"}),"フライトを検索"]})]})]})]}),s("div",{id:"searchResults",class:"hidden",children:[s("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6",children:s("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[s("div",{children:[s("h3",{class:"text-2xl font-bold text-gray-800 mb-2",children:"検索結果"}),s("p",{class:"text-gray-600",id:"routeInfo",children:"東京 (TYO) → ニューヨーク (JFK)"})]}),s("div",{class:"flex items-center space-x-4",children:s("select",{id:"sortBy",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"best",children:"おすすめ順"}),s("option",{value:"price",children:"最安値順"}),s("option",{value:"duration",children:"最短時間順"}),s("option",{value:"departure",children:"出発時間順"})]})})]})}),s("div",{class:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s("div",{class:"lg:col-span-1",children:s("div",{class:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[s("h4",{class:"text-lg font-bold text-gray-800 mb-4",children:"フィルター"}),s("div",{class:"mb-6",children:[s("h5",{class:"font-semibold text-gray-700 mb-3",children:"価格帯"}),s("div",{class:"space-y-2",children:[s("input",{type:"range",min:"0",max:"500000",step:"10000",class:"w-full",id:"priceRange"}),s("div",{class:"flex justify-between text-sm text-gray-600",children:[s("span",{children:"¥0"}),s("span",{id:"maxPrice",children:"¥500,000+"})]})]})]}),s("div",{class:"mb-6",children:[s("h5",{class:"font-semibold text-gray-700 mb-3",children:"経由回数"}),s("div",{class:"space-y-2",children:[s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700",children:"直行便"})]}),s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700",children:"1回経由"})]}),s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700",children:"2回以上経由"})]})]})]}),s("div",{class:"mb-6",children:[s("h5",{class:"font-semibold text-gray-700 mb-3",children:"出発時間帯"}),s("div",{class:"grid grid-cols-2 gap-2",children:[s("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[s("i",{class:"fas fa-sun text-yellow-500"})," 朝"]}),s("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[s("i",{class:"fas fa-cloud-sun text-orange-500"})," 昼"]}),s("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[s("i",{class:"fas fa-cloud-moon text-indigo-500"})," 夕"]}),s("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[s("i",{class:"fas fa-moon text-blue-900"})," 夜"]})]})]}),s("div",{class:"mb-6",children:[s("h5",{class:"font-semibold text-gray-700 mb-3",children:"航空会社"}),s("div",{class:"space-y-2 max-h-48 overflow-y-auto",children:[s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700 text-sm",children:"全日空 (ANA)"})]}),s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700 text-sm",children:"日本航空 (JAL)"})]}),s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700 text-sm",children:"ユナイテッド航空"})]}),s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700 text-sm",children:"デルタ航空"})]}),s("label",{class:"flex items-center space-x-2",children:[s("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),s("span",{class:"text-gray-700 text-sm",children:"アメリカン航空"})]})]})]}),s("button",{type:"button",class:"w-full bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"フィルターをリセット"})]})}),s("div",{class:"lg:col-span-3",id:"flightList",children:s("div",{class:"space-y-4",id:"flightCards"})})]})]})]})}),s("footer",{id:"mainFooter",class:"bg-gray-800 text-white flex-shrink-0 mt-auto",children:s("div",{class:"container mx-auto px-4 py-8",children:[s("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s("div",{children:[s("h5",{class:"font-bold text-lg mb-4",children:"FlightSearch"}),s("p",{class:"text-gray-400",children:"お得な航空券を簡単検索"})]}),s("div",{children:[s("h5",{class:"font-bold text-lg mb-4",children:"リンク"}),s("ul",{class:"space-y-2 text-gray-400",children:[s("li",{children:s("a",{href:"#",class:"hover:text-white",children:"利用規約"})}),s("li",{children:s("a",{href:"#",class:"hover:text-white",children:"プライバシーポリシー"})}),s("li",{children:s("a",{href:"#",class:"hover:text-white",children:"お問い合わせ"})})]})]}),s("div",{children:[s("h5",{class:"font-bold text-lg mb-4",children:"フォロー"}),s("div",{class:"flex space-x-4",children:[s("a",{href:"#",class:"text-gray-400 hover:text-white",children:s("i",{class:"fab fa-facebook text-2xl"})}),s("a",{href:"#",class:"text-gray-400 hover:text-white",children:s("i",{class:"fab fa-twitter text-2xl"})}),s("a",{href:"#",class:"text-gray-400 hover:text-white",children:s("i",{class:"fab fa-instagram text-2xl"})})]})]})]}),s("div",{class:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:s("p",{children:"© 2026 FlightSearch. All rights reserved."})})]})}),s("div",{id:"seatClassModal",class:"hidden fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modalTitle",children:s("div",{class:"flex items-center justify-center min-h-screen p-4",children:s("div",{class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl relative",children:[s("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 rounded-t-2xl",children:[s("div",{class:"flex items-center justify-between",children:[s("h2",{id:"modalTitle",class:"text-2xl font-bold",children:s("span",{id:"modalRouteInfo",children:"東京 → ニューヨーク"})}),s("button",{onclick:"closeSeatClassModal()",class:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition","aria-label":"モーダルを閉じる",children:s("i",{class:"fas fa-times text-2xl"})})]}),s("div",{id:"modalFlightInfo",class:"mt-2 text-sm opacity-90",children:"フライト情報を読み込み中..."})]}),s("div",{class:"p-6 max-h-[70vh] overflow-y-auto",children:[s("div",{class:"mb-8",children:[s("h3",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[s("i",{class:"fas fa-plane-departure text-blue-600 mr-2"}),"往路便"]}),s("div",{id:"outboundSeatClasses",class:"space-y-3"})]}),s("div",{class:"mb-6",children:[s("h3",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[s("i",{class:"fas fa-plane-arrival text-blue-600 mr-2"}),"復路便"]}),s("div",{id:"returnSeatClasses",class:"space-y-3"})]}),s("div",{class:"bg-blue-50 rounded-lg p-4 mt-6",children:s("div",{class:"flex justify-between items-center",children:[s("div",{children:[s("div",{class:"text-sm text-gray-600",children:"合計金額（1名あたり）"}),s("div",{class:"text-xs text-gray-500 mt-1",children:"往復 • 税・手数料込み"})]}),s("div",{class:"text-3xl font-bold text-blue-600",id:"modalTotalPrice",children:"¥0"})]})})]}),s("div",{class:"border-t border-gray-200 px-6 py-4 bg-gray-50 rounded-b-2xl",children:s("div",{class:"flex space-x-4",children:[s("button",{onclick:"closeSeatClassModal()",class:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition",children:"キャンセル"}),s("button",{onclick:"confirmSeatClassSelection()",class:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition shadow-lg hover:shadow-xl",disabled:!0,id:"confirmSelectionBtn",children:"予約を続ける"})]})})]})})}),s("div",{id:"bookingPage",class:"hidden fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 overflow-y-auto z-40",children:s("div",{class:"min-h-screen flex flex-col",children:[s("div",{class:"container mx-auto px-4 py-8 flex-grow",children:[s("button",{onclick:"backToSearch()",class:"mb-6 flex items-center text-blue-600 hover:text-blue-800 transition",children:[s("i",{class:"fas fa-arrow-left mr-2"}),"検索結果に戻る"]}),s("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[s("h2",{class:"text-3xl font-bold text-gray-800 mb-4 flex items-center",children:[s("i",{class:"fas fa-ticket-alt text-blue-600 mr-3"}),"予約内容の確認"]}),s("div",{class:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded",children:s("p",{class:"text-sm text-gray-700",children:[s("i",{class:"fas fa-info-circle text-blue-600 mr-2"}),"フライトと座席クラスを選択しました。次に座席を選択し、お客様情報を入力してください。"]})})]}),s("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[s("h3",{class:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[s("i",{class:"fas fa-plane text-blue-600 mr-2"}),"選択済みフライト情報"]}),s("div",{id:"flightSummary",class:"space-y-4"})]}),s("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[s("h3",{class:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[s("i",{class:"fas fa-chair text-blue-600 mr-2"}),"座席選択",s("span",{class:"ml-auto text-sm font-normal text-gray-600",id:"seatSelectionStatus",children:["選択済み: ",s("span",{id:"selectedSeatsCount",children:"0"})," / ",s("span",{id:"requiredSeats",children:"1"})," 座席"]})]}),s("div",{class:"flex flex-wrap gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[s("div",{class:"flex items-center space-x-2",children:[s("div",{class:"w-8 h-8 bg-green-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"空"}),s("span",{class:"text-sm text-gray-700",children:"利用可能"})]}),s("div",{class:"flex items-center space-x-2",children:[s("div",{class:"w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white text-xs font-bold",children:"選"}),s("span",{class:"text-sm text-gray-700",children:"選択済み"})]}),s("div",{class:"flex items-center space-x-2",children:[s("div",{class:"w-8 h-8 bg-gray-400 rounded flex items-center justify-center text-white text-xs font-bold",children:"×"}),s("span",{class:"text-sm text-gray-700",children:"利用不可"})]}),s("div",{class:"flex items-center space-x-2",children:[s("div",{class:"w-8 h-8 bg-yellow-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"特"}),s("span",{class:"text-sm text-gray-700",children:"特別席（追加料金）"})]})]}),s("div",{class:"aircraftmap_container mb-6",children:s("div",{class:"od-aircraftmap-map-wrapper",children:[s("div",{class:"mb-8",children:[s("h4",{class:"text-lg font-bold text-gray-800 mb-3 flex items-center",children:[s("i",{class:"fas fa-plane-departure text-blue-600 mr-2"}),"往路便 - 座席選択"]}),s("div",{id:"outboundSeatMap",class:"od-aircraftmap-cabins"})]}),s("div",{children:[s("h4",{class:"text-lg font-bold text-gray-800 mb-3 flex items-center",children:[s("i",{class:"fas fa-plane-arrival text-blue-600 mr-2"}),"復路便 - 座席選択"]}),s("div",{id:"returnSeatMap",class:"od-aircraftmap-cabins"})]})]})}),s("div",{class:"bg-blue-50 rounded-lg p-4",children:[s("h5",{class:"font-bold text-gray-800 mb-2",children:"選択済み座席"}),s("div",{id:"selectedSeatsSummary",class:"text-sm text-gray-700",children:"座席を選択してください"})]})]}),s("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[s("h3",{class:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[s("i",{class:"fas fa-user-edit text-blue-600 mr-2"}),"お客様情報"]}),s("form",{id:"customerInfoForm",children:[s("div",{id:"passengerFormsContainer"}),s("div",{class:"border-t border-gray-200 pt-6 mt-6",children:[s("h4",{class:"text-xl font-bold text-gray-800 mb-4",children:"連絡先情報"}),s("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:["メールアドレス ",s("span",{class:"text-red-500",children:"*"})]}),s("input",{type:"email",id:"contactEmail",required:!0,placeholder:"example@email.com",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:["電話番号 ",s("span",{class:"text-red-500",children:"*"})]}),s("input",{type:"tel",id:"contactPhone",required:!0,placeholder:"090-1234-5678",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s("div",{class:"border-t border-gray-200 pt-6 mt-6",children:[s("h4",{class:"text-xl font-bold text-gray-800 mb-4",children:"緊急連絡先"}),s("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"氏名"}),s("input",{type:"text",id:"emergencyName",placeholder:"山田 太郎",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"電話番号"}),s("input",{type:"tel",id:"emergencyPhone",placeholder:"090-1234-5678",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s("div",{class:"border-t border-gray-200 pt-6 mt-6",children:s("label",{class:"flex items-start space-x-3 cursor-pointer",children:[s("input",{type:"checkbox",id:"agreeTerms",required:!0,class:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 mt-1"}),s("span",{class:"text-sm text-gray-700",children:[s("a",{href:"#",class:"text-blue-600 hover:underline",children:"利用規約"}),"および",s("a",{href:"#",class:"text-blue-600 hover:underline",children:"プライバシーポリシー"}),"に同意します",s("span",{class:"text-red-500",children:"*"})]})]})})]})]}),s("div",{class:"bg-white rounded-2xl shadow-xl p-6 sticky bottom-4",children:s("div",{class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[s("div",{children:[s("div",{class:"text-sm text-gray-600 mb-1",children:"合計金額"}),s("div",{class:"text-4xl font-bold text-blue-600",id:"finalTotalPrice",children:"¥0"}),s("div",{class:"text-xs text-gray-500 mt-1",children:[s("span",{id:"totalPassengersCount",children:"1"}),"名分 • 往復 • 税・手数料込み"]})]}),s("div",{class:"flex space-x-4 w-full md:w-auto",children:[s("button",{type:"button",onclick:"backToSearch()",class:"flex-1 md:flex-none bg-gray-200 text-gray-700 py-4 px-8 rounded-lg font-semibold hover:bg-gray-300 transition",children:"キャンセル"}),s("button",{type:"button",onclick:"proceedToPayment()",class:"flex-1 md:flex-none bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-8 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition shadow-lg hover:shadow-xl",disabled:!0,id:"proceedPaymentBtn",children:[s("i",{class:"fas fa-credit-card mr-2"}),"支払いへ進む"]})]})]})})]}),s("footer",{class:"bg-gray-800 text-white mt-auto",children:s("div",{class:"container mx-auto px-4 py-8",children:[s("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s("div",{children:[s("h5",{class:"font-bold text-lg mb-4",children:"FlightSearch"}),s("p",{class:"text-gray-400",children:"お得な航空券を簡単検索"})]}),s("div",{children:[s("h5",{class:"font-bold text-lg mb-4",children:"リンク"}),s("ul",{class:"space-y-2 text-gray-400",children:[s("li",{children:s("a",{href:"#",class:"hover:text-white",children:"利用規約"})}),s("li",{children:s("a",{href:"#",class:"hover:text-white",children:"プライバシーポリシー"})}),s("li",{children:s("a",{href:"#",class:"hover:text-white",children:"お問い合わせ"})})]})]}),s("div",{children:[s("h5",{class:"font-bold text-lg mb-4",children:"フォロー"}),s("div",{class:"flex space-x-4",children:[s("a",{href:"#",class:"text-gray-400 hover:text-white",children:s("i",{class:"fab fa-facebook text-2xl"})}),s("a",{href:"#",class:"text-gray-400 hover:text-white",children:s("i",{class:"fab fa-twitter text-2xl"})}),s("a",{href:"#",class:"text-gray-400 hover:text-white",children:s("i",{class:"fab fa-instagram text-2xl"})})]})]})]}),s("div",{class:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:s("p",{children:"© 2026 FlightSearch. All rights reserved."})})]})})]})}),s("script",{src:"/static/app.js"})]})));it.post("/api/search",async e=>{const t=await e.req.json();return e.json({success:!0,message:"Search received",data:t})});const Vt=new Rr,an=Object.assign({"/src/index.tsx":it});let Nr=!1;for(const[,e]of Object.entries(an))e&&(Vt.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Vt.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Nr=!0);if(!Nr)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");export{Vt as default};
